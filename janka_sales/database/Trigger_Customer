CREATE OR REPLACE TRIGGER TRG_CUSTOMER
BEFORE INSERT OR UPDATE
ON CUSTOMER
REFERENCING NEW AS NEWROW OLD AS OLDROW
FOR EACH ROW
DECLARE 
BEGIN

  IF(:NEWROW.CREDIT <= 0) THEN
      RAISE_APPLICATION_ERROR(-20999, 'The credit' || :NEWROW.CREDIT || 'is over the credit limit');
  END IF;
  
  IF(UPDATING) THEN
  
    IF(ABS(:NEWROW.CREDIT - :OLDROW.CREDIT) > 1000) THEN
    RAISE_APPLICATION_ERROR(-20999, 'Transactions over 1000 are not allowed');
    END IF;
  END IF;
  
END TRG_CUSTOMER;  